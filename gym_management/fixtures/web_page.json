[
 {
  "breadcrumbs": null,
  "content_type": "Page Builder",
  "context_script": null,
  "css": ".full-width-image {\n  width: 100vw !important;\n  height: 100vh !important;\n  object-fit: cover !important;\n  display: block !important;\n  margin: 0 !important;\n  padding: 0 !important;\n}\nsection[data-section-template=\"Full Width Image\"] .container {\n  width: 100vw !important;\n  max-width: 100vw !important;\n  padding: 0 !important;\n  margin: 0 !important;\n}",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 1,
  "javascript": "",
  "main_section": null,
  "main_section_html": null,
  "main_section_md": null,
  "meta_description": null,
  "meta_image": "",
  "meta_title": null,
  "modified": "2025-07-09 16:54:03.805499",
  "module": "Jim",
  "name": "landing-page",
  "page_blocks": [
   {
    "add_background_image": 0,
    "add_border_at_bottom": 0,
    "add_border_at_top": 0,
    "add_bottom_padding": 1,
    "add_container": 1,
    "add_shade": 0,
    "add_top_padding": 0,
    "background_image": null,
    "css_class": null,
    "hide_block": 0,
    "parent": "landing-page",
    "parentfield": "page_blocks",
    "parenttype": "Web Page",
    "section_id": null,
    "web_template": "Full Width Image",
    "web_template_values": "{\"url\":\"/files/individual-doing-sport-healthy-lifestyle (1).jpg\"}"
   }
  ],
  "published": 1,
  "route": "gym-management/admin-dashboard",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Admin-Dashboard",
  "website_sidebar": ""
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": null,
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 0,
  "javascript": "frappe.ready(() => {\n    // 1) Definitions for the first two reports\n    const reports = [\n        {\n            title: \"Most Popular Group Classes\",\n            name: \"Most Popular Group Classes\",\n            elementId: \"chart-group-classes\"\n        },\n        {\n            title: \"Monthly Revenue Report\",\n            name: \"Monthly Revenue Report\",\n            elementId: \"chart-revenue\"\n        }\n    ];\n\n    // Render the first two\n    reports.forEach(report => renderReport(report));\n\n    // 2) Setup Fitness Journey selector + placeholder\n    setupFitnessJourney();\n});\n\nfunction renderReport({ title, name, elementId, filters = {} }) {\n    frappe.call({\n        method: \"frappe.desk.query_report.run\",\n        args: { report_name: name, filters },\n        callback: r => {\n            if (!r.message || !r.message.chart || !r.message.chart.data) {\n                console.warn(`${title}: No chart data.`);\n                return;\n            }\n            drawChart(\n                document.getElementById(elementId).getContext(\"2d\"),\n                title,\n                r.message.chart\n            );\n        }\n    });\n}\n\nfunction drawChart(ctx, title, chart) {\n    new Chart(ctx, {\n        type: chart.type || \"bar\",\n        data: {\n            labels: chart.data.labels,\n            datasets: chart.data.datasets.map(ds => ({\n                label: ds.name,\n                data: ds.values,\n                backgroundColor: \"rgba(54, 162, 235, 0.6)\"\n            }))\n        },\n        options: {\n            responsive: true,\n            plugins: {\n                title: { display: true, text: title }\n            }\n        }\n    });\n}\n\nfunction setupFitnessJourney() {\n    // Populate the dropdown\n    frappe.call({\n        method: \"frappe.client.get_list\",\n        args: {\n            doctype: \"Gym Membership\",\n            fields: [\"member\", \"full_name\"],\n            limit_page_length: 100\n        },\n        callback: r => {\n            const select = document.getElementById(\"select-member\");\n            r.message.forEach(m => {\n                const opt = document.createElement(\"option\");\n                opt.value = m.member;\n                opt.textContent = `${m.full_name} (${m.member})`;\n                select.appendChild(opt);\n            });\n\n            // When a member is selected, render their fitness journey\n            select.onchange = () => {\n                const member = select.value;\n                if (!member) return;\n                // Clear out previous chart canvas\n                const wrapper = document.getElementById(\"fitness-wrapper\");\n                wrapper.innerHTML = `<canvas id=\"chart-fitness\" height=\"200\"></canvas>`;\n\n                renderReport({\n                    title: \"Fitness Journey Report\",\n                    name: \"Fitness Journey Report\",\n                    elementId: \"chart-fitness\",\n                    filters: { member }\n                });\n            };\n        }\n    });\n}\n",
  "main_section": null,
  "main_section_html": "<div class=\"container my-5\">\n  <h2 class=\"text-center mb-4\">ðŸ“Š Gym Reports</h2>\n\n  <!-- Most Popular Group Classes -->\n  <div class=\"mb-5\">\n    <h4>Most Popular Group Classes</h4>\n    <canvas id=\"chart-group-classes\" height=\"200\"></canvas>\n  </div>\n\n  <!-- Monthly Revenue -->\n  <div class=\"mb-5\">\n    <h4>Monthly Revenue Report</h4>\n    <canvas id=\"chart-revenue\" height=\"200\"></canvas>\n  </div>\n\n  <!-- Fitness Journey -->\n  <div class=\"mb-5\">\n    <h4>Fitness Journey Report</h4>\n    <label for=\"select-member\">Select Member:</label>\n    <select id=\"select-member\" class=\"form-control mb-3\">\n      <option value=\"\">-- choose a member --</option>\n    </select>\n    <div id=\"fitness-wrapper\">\n      <canvas id=\"chart-fitness\" height=\"200\"></canvas>\n    </div>\n  </div>\n</div>\n\n<!-- Load Chart.js on website pages -->\n<script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2025-07-09 15:38:31.421828",
  "module": "Jim",
  "name": "reports-page",
  "page_blocks": [],
  "published": 1,
  "route": "reports-page",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Reports-page",
  "website_sidebar": null
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": null,
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 0,
  "javascript": null,
  "main_section": null,
  "main_section_html": "<html>\n<head>\n    <title>Login</title>\n    <link rel=\"stylesheet\" href=\"/assets/gym/css/login.css\"> <!-- Link to your custom CSS -->\n    <style>\n        /* Hide navbar on login page */\n        body.login-page nav {\n            display: none;\n        }\n        .navbar{\n            display:none;\n        }\n        \n        /* login.css */\n*{\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\nbody {\n    font-family: Arial, sans-serif;\n    margin-top: 200px;\n    padding: 0;\n    background: #f4f4f4;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    width: 100vw;\n}\n.login-container {\n    width: 70%;\n    max-width: 400px;\n    /*margin: 10% auto;*/\n    background-color: #fff;\n    padding: 20px;\n    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);\n    border-radius: 8px;\n}\n.login-box h2 {\n    text-align: center;\n    margin-bottom: 20px;\n    color: #333;\n}\n.textbox {\n    margin-bottom: 20px;\n    position: relative;\n}\n.textbox input {\n    width: 100%;\n    padding: 10px;\n    padding-left: 20px;\n    border: 2px solid #ccc;\n    border-radius: 4px;\n    font-size: 16px;\n    box-sizing: border-box;\n}\n.textbox input:focus {\n    border-color: #4CAF50;\n    outline: none;\n}\n.btn {\n    width: 100%;\n    padding: 10px;\n    background-color: #4CAF50;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 16px;\n}\n.btn:hover {\n    background-color: #45a049;\n}\n\n    </style>\n</head>\n<body class=\"login-page\">\n    <div class=\"login-container\">\n        <div class=\"login-box\">\n            <h2>Login</h2>\n            <form id=\"login_form\">\n                <div class=\"textbox\">\n                    <input type=\"email\" id=\"email\" name=\"email\" required placeholder=\"Enter your email\">\n                </div>\n                <div class=\"textbox\">\n                    <input type=\"password\" id=\"password\" name=\"password\" required placeholder=\"Enter your password\">\n                </div>\n                <div class=\"textbox\">\n                    <select id=\"role\" name=\"role\" required>\n                        <option value=\"\" disabled selected>Select your role</option>\n                        <option value=\"Trainer\">Trainer</option>\n                        <option value=\"User\">User</option>\n                    </select>\n                </div>\n                <button type=\"submit\" class=\"btn\">Login</button>\n            </form>\n        </div>\n    </div>\n\n    <script>\n        // login.js\n\n        document.getElementById('login_form').addEventListener('submit', function(event) {\n            event.preventDefault();  // Prevent default form submission\n        \n            let email = document.getElementById('email').value;\n            let password = document.getElementById('password').value;\n            let role = document.getElementById('role').value;  // Get selected role\n            \n            console.log(email);\n            console.log(password);\n            console.log(role);  // Check the role value\n        \n            frappe.call({\n                method: 'gym_management.jim.api.authenticate_user',  // Correct method path\n                args: {\n                    email: email,\n                    password: password,\n                    role: role  // Send role to the backend\n                },\n                callback: function(response) {\n                    // Check response from the backend\n                    if (response.message.success) {\n                        // Successfully authenticated\n                        localStorage.setItem('email', email);\n                        localStorage.setItem('role', role);  // Store role in localStorage\n                        frappe.session.user_email = email;\n\n                        if (response.message.role === 'Admin') {\n                            window.location.href = '/gym-management/admin-dashboard';  // Redirect to Admin Dashboard\n                        } else if (response.message.role === 'Trainer') {\n                            window.location.href = '/gym-management/admin-dashboard';  // Redirect to Trainer Dashboard\n                        } else {\n                            window.location.href = '/gym-management/admin-dashboard';  // Redirect to User Dashboard\n                        }\n                    } else {\n                        // Show specific error messages based on the response\n                        let errorMessage = '';\n                        if (response.message === 'Invalid email') {\n                            errorMessage = 'The email you entered is not registered.';\n                        } else if (response.message === 'Invalid role') {\n                            errorMessage = 'Your role is not valid. Please contact support.';\n                        } else if (response.message === 'Invalid password') {\n                            errorMessage = 'The password you entered is incorrect.';\n                        } else {\n                            errorMessage = 'An unknown error occurred. Please try again.';\n                        }\n\n                        // Show the error message to the user\n                        frappe.msgprint(errorMessage);\n                    }\n                }\n            });\n        });\n        \n    </script>\n</body>\n</html>",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2025-07-09 18:43:44.852497",
  "module": "Jim",
  "name": "login",
  "page_blocks": [],
  "published": 1,
  "route": "gym-management/login",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Login",
  "website_sidebar": null
 }
]