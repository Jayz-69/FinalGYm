{
 "allow_comments": 0,
 "allow_delete": 0,
 "allow_edit": 0,
 "allow_incomplete": 0,
 "allow_multiple": 0,
 "allow_print": 0,
 "anonymous": 0,
 "apply_document_permissions": 0,
 "button_label": "Save",
 "client_script": "setTimeout(() => {\n    const grid = frappe.web_form.fields_dict.metrics_update?.grid;\n    if (!grid) {\n        console.error(\"\u274c Child table grid not found\");\n        return;\n    }\n\n    // Attach blur event listener on height and weight inputs\n    grid.wrapper.on('blur', 'input[data-fieldname=\"current_height\"], input[data-fieldname=\"current_weight\"]', function () {\n        const $row = $(this).closest('.grid-row');\n        const row_name = $row.attr(\"data-name\");\n\n        if (!row_name) {\n            console.warn(\"\u26a0\ufe0f Could not get row name\");\n            return;\n        }\n\n        const rows = frappe.web_form.get_value(\"metrics_update\") || [];\n        const row = rows.find(r => r.name === row_name);\n\n        if (!row) {\n            console.warn(\"\u26a0\ufe0f Could not find row with name:\", row_name);\n            return;\n        }\n\n        let height = parseFloat(row.current_height);\n        let weight = parseFloat(row.current_weight);\n\n        if (!height || !weight || height === 0) {\n            console.log(\"\u26a0\ufe0f Missing or invalid inputs for BMI calculation\");\n            // Optionally clear BMI if inputs are invalid\n            row.bmi = \"\";\n        } else {\n            // Height is assumed in cm, convert to meters\n            let height_m = height / 100;\n            let bmi = weight / (height_m * height_m);\n            row.bmi = bmi.toFixed(2);\n            console.log(`\u2705 Calculated BMI for row ${row_name}: ${row.bmi}`);\n        }\n\n        // Update the whole child table back to the form\n        frappe.web_form.set_value(\"metrics_update\", rows).then(() => {\n            console.log(\"\u2705 BMI updated in the form\");\n        });\n    });\n\n    console.log(\"\u2705 Listeners for current_height and current_weight attached\");\n}, 500);\n",
 "condition_json": "[]",
 "creation": "2025-07-01 16:28:32.557797",
 "doc_type": "Gym Member",
 "docstatus": 0,
 "doctype": "Web Form",
 "idx": 0,
 "is_standard": 1,
 "list_columns": [],
 "login_required": 0,
 "max_attachment_size": 0,
 "modified": "2025-07-02 12:31:09.604861",
 "modified_by": "Administrator",
 "module": "Jim",
 "name": "gym-member-registration",
 "owner": "Administrator",
 "published": 1,
 "route": "gym-member-info",
 "show_attachments": 0,
 "show_list": 0,
 "show_sidebar": 0,
 "title": "Gym Member Info",
 "web_form_fields": [
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "full_name",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Full Name",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "email",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Email",
   "max_length": 0,
   "max_value": 0,
   "options": "Email",
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "phone",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Phone Number",
   "max_length": 0,
   "max_value": 0,
   "options": "Phone",
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "dob",
   "fieldtype": "Date",
   "hidden": 0,
   "label": "Date of Birth",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "gender",
   "fieldtype": "Select",
   "hidden": 0,
   "label": "Gender",
   "max_length": 0,
   "max_value": 0,
   "options": "Male\nFemale",
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "address",
   "fieldtype": "Small Text",
   "hidden": 0,
   "label": "Address",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "allocated_trainer",
   "fieldtype": "Link",
   "hidden": 0,
   "label": "Allocated Trainer",
   "max_length": 0,
   "max_value": 0,
   "options": "Gym Trainer",
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "active_membership",
   "fieldtype": "Link",
   "hidden": 0,
   "label": "Active Membership",
   "max_length": 0,
   "max_value": 0,
   "options": "Gym Membership",
   "precision": "",
   "read_only": 1,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "metrics_update",
   "fieldtype": "Table",
   "hidden": 0,
   "label": "Metrics Update",
   "max_length": 0,
   "max_value": 0,
   "options": "Metrics Update",
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  }
 ]
}