{
 "allow_comments": 0,
 "allow_delete": 0,
 "allow_edit": 0,
 "allow_incomplete": 0,
 "allow_multiple": 0,
 "allow_print": 0,
 "anonymous": 0,
 "apply_document_permissions": 0,
 "button_label": "Save",
 "client_script": "console.log(\"Hello World\");\n// document.getElementsByClassName(\"nav-avatar\")[0].style.display = \"none\";\n// document.getElementsByClassName(\"navbar-brand\")[0].style.display = \"none\";\ndocument.getElementsByClassName(\"nav-avatar\")[0].style.display = \"none\";\ndocument.getElementsByClassName(\"navbar-brand\")[0].style.display = \"none\";\n\n\nwindow.onload = function() {\n    // Hide the element with the class 'nav-avatar'\n    document.getElementsByClassName(\"nav-avatar\")[0].style.display = \"none\";\n    document.getElementsByClassName(\"navbar-brand\")[0].style.display = \"none\";\n};\n    \nlet value = localStorage.getItem('email');\nconst emailField = document.querySelector('input[data-fieldname=\"email\"]');\nemailField.value=value;\nemailField.setAttribute(\"readonly\", true);\n\n\n\n\nfrappe.web_form.after_load = () => {\n    console.log(\"\ud83d\udd01 Waiting for child table grid to become ready...\");\n\n    const waitForGrid = setInterval(() => {\n        const grid = frappe.web_form.fields_dict.table_ctkk?.grid;  // \u2705 use actual fieldname\n\n        if (grid && grid.wrapper && grid.wrapper.length) {\n            clearInterval(waitForGrid);\n            console.log(\"\u2705 table_ctkk child table grid is ready. Attaching BMI listeners...\");\n\n            grid.wrapper.on(\"blur\", 'input[data-fieldname=\"current_weight\"], input[data-fieldname=\"current_height\"]', function () {\n                const $row = $(this).closest(\".grid-row\");\n\n                const weight = parseFloat($row.find('input[data-fieldname=\"current_weight\"]').val());\n                const height_cm = parseFloat($row.find('input[data-fieldname=\"current_height\"]').val());\n                const $bmi_input = $row.find('input[data-fieldname=\"bmi\"]');\n\n                if (weight > 0 && height_cm > 0) {\n                    const height_m = height_cm / 100;\n                    const bmi = weight / (height_m * height_m);\n                    const rounded_bmi = Math.round(bmi * 10) / 10;\n                    $bmi_input.val(rounded_bmi).trigger(\"change\");\n                    console.log(`\u2705 BMI calculated: ${rounded_bmi}`);\n                } else {\n                    $bmi_input.val(\"\").trigger(\"change\");\n                    console.log(\"\u26a0\ufe0f Invalid or missing weight/height\");\n                }\n            });\n\n            console.log(\"\u2705 BMI listeners attached to child table rows.\");\n        }\n    }, 200);\n};\n",
 "condition_json": "[]",
 "creation": "2025-07-09 10:31:10.666456",
 "doc_type": "BMI",
 "docstatus": 0,
 "doctype": "Web Form",
 "idx": 0,
 "is_standard": 1,
 "list_columns": [],
 "login_required": 0,
 "max_attachment_size": 0,
 "modified": "2025-07-09 17:03:05.985563",
 "modified_by": "Administrator",
 "module": "Jim",
 "name": "bmi",
 "owner": "Administrator",
 "published": 1,
 "route": "bmi",
 "show_attachments": 0,
 "show_list": 0,
 "show_sidebar": 0,
 "title": "BMI",
 "web_form_fields": [
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "track_fitness_section",
   "fieldtype": "Section Break",
   "hidden": 0,
   "label": "Track Fitness",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "email",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Email",
   "max_length": 0,
   "max_value": 0,
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "table_ctkk",
   "fieldtype": "Table",
   "hidden": 0,
   "label": "Metrics Update",
   "max_length": 0,
   "max_value": 0,
   "options": "Metrics Update",
   "precision": "",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  }
 ]
}